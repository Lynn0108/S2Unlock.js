/*
 * S2Unlock v1.0.0
 *
 * A simple 'slide to unlock' javascript plugin
 * Both picture and background color are valid 
 * 
 * https://github.com/Lynn0108/S2Unlock.js
 * Author: Rui Liao 
 * Released on: Sep. 26, 2017
 */
!function(t){function e(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,s=0;s<e.length;s++)if(t.indexOf(e[s])>0){i=!1
break}return console.log(t),i}function i(t,e){this.wrap=document.querySelector(t),this.width=e.width||"300",this.height=e.height||"50",this.wrapImg=e.wrapImgSrc||"",this.wrapColor=e.wrapColor||"#089",this.slideBtn=this.wrap.querySelector(e.slideButton),this.slideImg=e.slideImgSrc||"",this.btnColor=e.btnColor||"#089",this.callback="function"==typeof e.callback?e.callback:this.defaultCallback,this.pcEvent={start:"mousedown",move:"mousemove",end:"mouseup"},this.phoneEvent={start:"touchstart",move:"touchmove",end:"touchend"},this.init()}var s=e()
i.prototype={constructor:i,init:function(){this.wrap&&this.slideBtn&&this.initStyle()},initStyle:function(){this.wrap.style.width=this.width+"px"
var t=this.wrapImg,e=this.slideImg
if(t||e){var i=this
t?(this.wrap.style.border="none",this.setBgImage(this.wrap,t)):this.wrapStyle(),e?this.setBgImage(this.slideBtn,e):this.slideStyle()
var s=new Image
s.src=e?e:t,s.onload=function(){i.slideW=i.slideBtn.offsetWidth,i.hintStyle.call(i),i.prepare.call(i)}}else this.wrapStyle(),this.slideStyle(),this.hintStyle(),this.prepare()},wrapStyle:function(){this.wrap.style.borderColor=this.wrapColor,this.wrap.style.height=this.height+"px"},slideStyle:function(){this.slideBtn.style.background=this.btnColor,this.slideW=this.width/5,this.slideBtn.style.width=this.slideW+"px"},hintStyle:function(){var t=null
if(t=this.wrap.querySelector(".hint")){var e=this.wrap.offsetHeight
t.style.lineHeight=e+"px",t.style.left=this.slideW+"px"}},setBgImage:function(t,e){var i=document.createElement("img")
i.setAttribute("src",e),t.style.backgroundImage='url("'+e+'")',t.appendChild(i)},prepare:function(){this.endL=this.width-this.slideW,this.bindEvent()},initEvent:function(){this.isPC=e()},bindEvent:function(){function t(t){l=t.pageX||t.touches[0].pageX,h.slideBtn.addEventListener(d,e,!1)}function e(t){var e=t.pageX||t.touches[0].pageX
e-=l,r>=e&&e>=0&&(a=e,this.style.transform="translate3d("+e+"px, 0, 0)")}function i(t){h.slideBtn.removeEventListener(d,e,!1)
var i=t.pageX||t.changedTouches[0].pageX
i-=l,i>=r-1?h.callback():this.style.transform="translate3d(0, 0, 0)",h.isPC||(this.style.transform="translate3d(0, 0, 0)")}function n(t){h.slideBtn.removeEventListener(d,e,!1),this.style.transform="translate3d(0, 0, 0)"}var h=this,r=this.endL,l=0,a=0,o=s?this.pcEvent.start:this.phoneEvent.start,d=s?this.pcEvent.move:this.phoneEvent.move,c=s?this.pcEvent.end:this.phoneEvent.end
this.slideBtn.addEventListener(o,t,!1),this.slideBtn.addEventListener(c,i,!1),this.slideBtn.addEventListener("mouseout",n,!1)},defaultCallback:function(){alert("success")}},t.S2Unlock=i}(window)